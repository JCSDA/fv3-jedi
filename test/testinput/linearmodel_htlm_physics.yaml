analysis variables: &anavars [u_component_of_native_D_grid_wind,v_component_of_native_D_grid_wind,air_temperature,air_pressure_thickness,specific_humidity,cloud_liquid_water,cloud_liquid_ice,mole_fraction_of_ozone_in_air]
background error:
  covariance model: SABER
  saber central block:
    saber block name: ID
geometry:
  fms initialization:
    namelist filename: Data/fv3files/input_geos_c12.nml
    field table filename: Data/fv3files/field_table_gmao
  akbk: Data/fv3files/akbk72.nc4
  npx: 13
  npy: 13
  npz: 72
  field metadata override: Data/fieldmetadata/geos.yaml
linear model:
  name: HTLM
  simplified linear model:
    name: FV3JEDITLM
    namelist filename: Data/fv3files/input_geos_c12.nml
    linear model namelist filename: Data/fv3files/inputpert_4dvar.nml
    tstep: PT1H
    lm_do_dyn: 1
    lm_do_trb: 1
    lm_do_mst: 1
    tlm variables: *anavars
    trajectory:
      model variables: &modelvars [u,v,ua,va,t,delp,q,qi,ql,o3ppmv,phis,
                        qls,qcn,cfcn,frocean,frland,varflt,ustar,bstar,
                        zpbl,cm,ct,cq,kcbl,tsm,khl,khu,frlake,frseaice,vtype,
                        stype,vfrac,sheleg,ts,soilt,soilm,u10m,v10m]
  tstep: PT1H
  increment variables: *anavars
  htlm coefficient calc:
    training variables: [air_temperature]
    window length: PT1H
    window begin: 2020-12-15T00:00:00Z
    htlm calculator:
      influence region size: 2
      #regularization param: 100
      rms scaling: false
    htlm ensemble:
      ensemble size: 3
      model:
        name: PSEUDO
        filetype: cube sphere history
        provider: geos
        datapath: Data/inputs/geos_c12
        filenames: [geos.bkg.%yyyy%mm%dd_%hh%MM%ssz.nc4, geos.bkg.crtmsrf.%yyyy%mm%dd_%hh%MM%ssz.nc4]
        run stage check: true
        tstep: PT1H
      coeff linear model:
        name: FV3JEDITLM
        namelist filename: Data/fv3files/input_geos_c12.nml
        linear model namelist filename: Data/fv3files/inputpert_4dvar.nml
        tstep: PT1H
        lm_do_dyn: 1
        lm_do_trb: 1
        lm_do_mst: 1
        tlm variables: *anavars
        trajectory:
          model variables: &modelvars [u,v,ua,va,t,delp,q,qi,ql,o3ppmv,phis,
                            qls,qcn,cfcn,frocean,frland,varflt,ustar,bstar,
                            zpbl,cm,ct,cq,kcbl,tsm,khl,khu,frlake,frseaice,vtype,
                            stype,vfrac,sheleg,ts,soilt,soilm,u10m,v10m]
      state geometry:
        fms initialization:
          namelist filename: Data/fv3files/input_geos_c12.nml
          field table filename: Data/fv3files/field_table_gmao
        akbk: Data/fv3files/akbk72.nc4
        npx: 13
        npy: 13
        npz: 72
        field metadata override: Data/fieldmetadata/geos.yaml
      control member:
        datetime: 2020-12-15T00:00:00Z
        filetype: cube sphere history
        provider: geos
        datapath: Data/inputs/geos_c12
        filenames: [geos.bkg.20201215_000000z.nc4, geos.bkg.crtmsrf.20201215_000000z.nc4]
        state variables: [u,v,ua,va,t,delp,q,qi,ql,o3ppmv,phis,
                          qls,qcn,cfcn,frocean,frland,varflt,ustar,bstar,
                          zpbl,cm,ct,cq,kcbl,tsm,khl,khu,frlake,frseaice,vtype,
                          stype,vfrac,sheleg,ts,soilt,soilm,u10m,v10m]
      non linear ensemble:
        perturbed members:
          members from template:
            template:
              datetime: 2020-12-15T00:00:00Z
              filetype: cube sphere history
              provider: geos
              state variables: *modelvars
              datapath: Data/inputs/geos_c12
              filenames: [geos.mem%mem%.20201215_000000z.nc4, geos.bkg.crtmsrf.20201215_000000z.nc4]
            pattern: '%mem%'
            nmembers: 3
            zero padding: 3
linear model test:
  forecast length: PT1H
  first multiplier TL: 0.01
  iterations TL: 1
  tolerance AD: 1.0e-10
  tolerance TL: 1.0e3 # With physics on the tl test will not pass (perturbation model)
model:
  name: PSEUDO
  filetype: cube sphere history
  provider: geos
  datapath: Data/inputs/geos_c12
  filenames: [geos.bkg.%yyyy%mm%dd_%hh%MM%ssz.nc4, geos.bkg.crtmsrf.%yyyy%mm%dd_%hh%MM%ssz.nc4]
  run stage check: true
  tstep: PT1H
model aux control: null
initial condition:
  datetime: 2020-12-15T00:00:00Z
  filetype: cube sphere history
  provider: geos
  datapath: Data/inputs/geos_c12
  filenames: [geos.bkg.20201215_000000z.nc4, geos.bkg.crtmsrf.20201215_000000z.nc4]
  state variables: [u,v,ua,va,t,delp,q,qi,ql,o3ppmv,phis,
                    qls,qcn,cfcn,frocean,frland,varflt,ustar,bstar,
                    zpbl,cm,ct,cq,kcbl,tsm,khl,khu,frlake,frseaice,vtype,
                    stype,vfrac,sheleg,ts,soilt,soilm,u10m,v10m]
