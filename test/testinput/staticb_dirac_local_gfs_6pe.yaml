geometry:
  fms initialization:
    namelist filename: Data/fv3files/fmsmpp.nml
    field table filename: Data/fv3files/field_table_gfdl
  akbk: Data/fv3files/akbk127.nc4
  npx: 13
  npy: 13
  npz: 127
  field metadata override: Data/fieldmetadata/gfs-restart.yaml
initial condition:
  datetime: 2020-12-15T00:00:00Z
  filetype: fms restart
  state variables: &state_vars [ua,va,t,delp,ps,sphum,ice_wat,liq_wat,o3mr]
  datapath: Data/inputs/gfs_c12/bkg
  filename_core: 20201215.000000.fv_core.res.nc
  filename_trcr: 20201215.000000.fv_tracer.res.nc
  filename_sfcd: 20201215.000000.sfc_data.nc
  filename_sfcw: 20201215.000000.fv_srf_wnd.res.nc
  filename_cplr: 20201215.000000.coupler.res
background error:
  covariance model: SABER
  saber central block:
    saber block name: BUMP_NICAS
    active variables: &active_vars [stream_function,velocity_potential,air_temperature,surface_pressure,specific_humidity,cloud_liquid_water,ozone_mass_mixing_ratio]
    bump:
      datadir: Data/staticb
      verbosity: main
      strategy: specific_univariate
      load_nicas_local: true
      grids:
      - prefix: nicas_3D_gfs
        variables: [stream_function,velocity_potential,air_temperature,specific_humidity,cloud_liquid_water,ozone_mass_mixing_ratio]
      - prefix: nicas_2D_gfs
        variables: [surface_pressure]
    input fields:
    - parameter: universe radius
      file:
        datetime: 2020-12-15T00:00:00Z
        set datetime on read: true
        filetype: fms restart
        psinfile: true
        datapath: Data/staticb/
        filename_core: 20201215.000000.cor_rh_1.fv_core.res.nc
        filename_trcr: 20201215.000000.cor_rh_1.fv_tracer.res.nc
        filename_sfcd: 20201215.000000.cor_rh_1.sfc_data.nc
        filename_sfcw: 20201215.000000.cor_rh_1.fv_srf_wnd.res.nc
        filename_cplr: 20201215.000000.cor_rh_1.coupler.res
  saber outer blocks:
  - saber block name: StdDev
    active variables: *active_vars
    input fields:
    - parameter: StdDev
      file:
        set datetime on read: true
        datetime: 2020-12-15T00:00:00Z
        filetype: fms restart
        psinfile: true
        datapath: Data/staticb/
        filename_core: 20201215.000000.stddev.fv_core.res.nc
        filename_trcr: 20201215.000000.stddev.fv_tracer.res.nc
        filename_sfcd: 20201215.000000.stddev.sfc_data.nc
        filename_sfcw: 20201215.000000.stddev.fv_srf_wnd.res.nc
        filename_cplr: 20201215.000000.stddev.coupler.res
  - saber block name: BUMP_VerticalBalance
    active variables: [stream_function,velocity_potential,air_temperature,surface_pressure]
    bump:
      datadir: Data/staticb
      prefix: vbal_gfs
      verbosity: main
      universe_rad: 2000.0e3
      load_vbal: true
      load_samp_local: true
      fname_samp: vbal_2020121421_gfs_sampling
      vbal_block: [true,true,false,true]
  - saber block name: BUMP_PsiChiToUV
    active variables: [eastward_wind,northward_wind,stream_function,velocity_potential]
    bump:
      datadir: Data/staticb
      prefix: psichitouv_gfs
      verbosity: main
      universe_rad: 2000.0e3
      load_wind_local: true  
output dirac:
  filetype: fms restart
  datapath: Data/staticb/
  filename_core: dirac_local_%id%_gfs_6pe.fv_core.res.nc
  filename_trcr: dirac_local_%id%_gfs_6pe.fv_tracer.res.nc
  filename_sfcd: dirac_local_%id%_gfs_6pe.sfc_data.nc
  filename_sfcw: dirac_local_%id%_gfs_6pe.fv_srf_wnd.res.nc
  filename_cplr: dirac_local_%id%_gfs_6pe.coupler.res
dirac:
  ndir: 1
  ixdir: [1]
  iydir: [1]
  ildir: [50]
  itdir: [1]
  ifdir: [air_temperature]

test:
  reference filename: testoutput/staticb_dirac_local_gfs_6pe.ref
  test output filename: testoutput/staticb_dirac_local_gfs_6pe.test.out
