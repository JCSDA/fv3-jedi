# (C) Copyright 2020-2023 UCAR
#
# This software is licensed under the terms of the Apache Licence Version 2.0
# which can be obtained at http://www.apache.org/licenses/LICENSE-2.0.

covariance model: SABER
saber central block:
  saber block name: BUMP_NICAS
  active variables: &active_vars [stream_function,velocity_potential,air_temperature,surface_pressure,specific_humidity,cloud_liquid_water,ozone_mass_mixing_ratio]
  bump:
    io:
      data directory: $(static_data)/skylab-3.0.0/staticb/c192
      files prefix: nicas_2020010100-2020013100/nicas_2020010100-2020013100
    drivers:
      multivariate strategy: specific_univariate
      read local nicas: true
    nicas:
      minimum level:
      - variables:
        - liq_wat
        value: 76
    grids:
    - model:
        variables:
        - stream_function
        - velocity_potential
        - air_temperature
        - specific_humidity
        - cloud_liquid_water
        - ozone_mass_mixing_ratio
      io:
        overriding nicas file: nicas_2020010100-2020013100/nicas_2020010100-2020013100_3D_nicas
    - model:
        variables:
        - surface_pressure
      io:
        overriding nicas file: nicas_2020010100-2020013100/nicas_2020010100-2020013100_2D_nicas
  input fields:
  - parameter: universe radius
    file:
      datetime: 2020-01-31T00:00:00Z
      filetype: fms restart
      set datetime on read: true
      psinfile: true
      datapath: $(static_data)/skylab-3.0.0/staticb/c192/cor_2020010100-2020013100
      filename_core: cor_rh.fv_core.res.nc
      filename_trcr: cor_rh.fv_tracer.res.nc
      filename_cplr: cor_rh.coupler.res
saber outer blocks:
- saber block name: StdDev
  active variables: *active_vars
  input fields:
  - parameter: StdDev
    file:
      datetime: 2020-01-31T00:00:00Z
      filetype: fms restart
      set datetime on read: true
      psinfile: true
      datapath: $(static_data)/skylab-3.0.0/staticb/c192/var_2020010100-2020013100
      filename_core: stddev.fv_core.res.nc
      filename_trcr: stddev.fv_tracer.res.nc
      filename_cplr: stddev.coupler.res
- saber block name: BUMP_VerticalBalance
  active variables: [stream_function,velocity_potential,air_temperature,surface_pressure]
  bump:
    general:
      universe length-scale: 2000000.0
    io:
      data directory: $(static_data)/skylab-3.0.0/staticb/c192
      files prefix: vbal_2020010100-2020013100/vbal_2020010100-2020013100
      overriding sampling file: vbal_2020013100/vbal_2020013100_sampling
    drivers:
      read local sampling: true
      read vertical balance: true
    vertical balance:
      vbal:
      - balanced variable: velocity_potential
        unbalanced variable: stream_function
      - balanced variable: air_temperature
        unbalanced variable: stream_function
      - balanced variable: surface_pressure
        unbalanced variable: stream_function
linear variable change:
  linear variable change name: Control2Analysis
  input variables: [stream_function,velocity_potential,air_temperature,surface_pressure,specific_humidity,cloud_liquid_water,ozone_mass_mixing_ratio]
  output variables: $(an_variables)
